$android-icon-font-size: 24px;
$ios-icon-font-size: 30px;

$background-color-key-error: red;
$background-color-key-confirm: gray;

$favs-trans-dur: 0.3s;

$favorite-star-font-size: 1.93em;
$favorite-plus-font-size: 0.66em;
$star-fs: 2em;

%stacked {
  line-height: 1;

  position: absolute;
  left: 0;

  width: 100%;
}

html {
  display: none;

  //
  // Desktop
  //
  &:not(.ios):not(.android) { background-color: inherit; }

  #favorites {
    .page {
      .navbar {
        a.link {
          &.done { position: absolute; }

          &.edit-mode {
            transition: opacity $favs-trans-dur;
            opacity: 0;
          }
        }

        .right a.link:first-of-type { position: absolute; }
      }

      &.edit-mode {
        .navbar a.link {
          &:not(.edit-mode) {
            transition: opacity $favs-trans-dur;
            opacity: 0;
          }

          &.edit-mode {
            transition: opacity $favs-trans-dur;
            opacity: 1;
          }

          &.edit { pointer-events: none; }
        }

        .list-block div.item-content {
          left: 0;
          transition: left $favs-trans-dur;

          .item-after {
            transition: opacity $favs-trans-dur;
            opacity: 1;
          }
        }
      }

      .list-block .item-content {
        // left: -50px;
        transition: left $favs-trans-dur;

        .item-after {
          transition: opacity $favs-trans-dur;
          opacity: 0;
        }
      }
    }
  }

  //
  // Android
  //
  &.android {
    #favorites .page {
      &.edit-mode .navbar a.link.edit-mode i.icon {

        &:not([class*='ion-ios-']) {
          transition: opacity $favs-trans-dur;
          opacity: 1;
        }
      }

      a.link i.icon {
        font-size: 24px;
        &[class*='ion-ios-'] { opacity: 0; }
      }

      .list-block .item-content { left: -50px; }
    }

    // Tweak the tab bar
    .toolbar.tabbar {
      .tab-link {
        padding-top: 6px;

        i.icon {
          font-size: $android-icon-font-size;

          &:not([class*='ion-ios-']) { display: block; }
        }

        .tabbar-label { font-size: 12px; }
      }

      .tab-link-highlight { height: 6px; }
    }
  }

  //
  // iOS
  //
  &.ios {
    #favorites {
      .page {

        .list-block .item-content {
          left: -40px;
          transition: left $favs-trans-dur;
        }

        &.edit-mode .navbar a.link {
          &.edit-mode i.icon[class*='ion-ios-'] {
            transition: opacity $favs-trans-dur;
            opacity: 1;
          }
        }

        a.link i.icon:not([class*='ion-ios-']) { opacity: 0; }

        .navbar {
          .left,
          .right {
            a + a { margin-left: 0; }
          }

          a.link i.icon { font-size: 30px; }
        }
      }
    }

    .tabbar {
      a.tab-link {
        padding: 0;

        &:not(.active) i.icon[class*='ion-ios-'][class*='-outline'] {
          display: block;
        }

        &.active i.icon[class*='ion-ios-']:not([class*='-outline']) {
          display: block;
        }

        i.icon {
          font-size: $ios-icon-font-size;
          display: none;
          opacity: 1;
        }
      }
    }

    .tabbar-labels span.tabbar-label { font-size: 14px; }
  }
}

.toolbar .tab-link i.icon { display: none; }

#calculator .key-favorite {
  &.key-favorite-set {
    position: relative;

    display: block;

    text-align: center;

    i {
      &.ion-ios-star {
        @extend %stacked;

        font-size: $star-fs;

        margin-top: -5px;
      }

      &.icon.ion-plus {
        @extend %stacked;

        font-size: 0.75em;

        margin-top: 12.5px;

        color: #efeff4;
      }
    }
  }

  &.key-favorite-get i.ion-ios-star { font-size: $star-fs; }
}

#favorites .list-block {
  .item-media a { color: red; }

  .item-after {
    margin-right: -20px;
    .edit { color: inherit; }
   }

  .sortable-handler { right: 40px; }

  i.icon { font-size: 1.5em; }

  li {
    .sortable-handler {
      top: 0;
      right: 30px;

      transition: // sass-lint:disable indentation
        right $favs-trans-dur 0,
        top $favs-trans-dur,
        opacity $favs-trans-dur;
      // sass-lint:enable indentation

      opacity: 1;
    }

    &.swipeout-opened .sortable-handler {
      top: -30px;
      right: -30px;

      transition: // sass-lint:disable indentation
        right $favs-trans-dur 0,
        top $favs-trans-dur,
        opacity $favs-trans-dur;
      // sass-lint:enable indentation

      opacity: 0;
    }
  }
}

.display {
  font-size: 2em;

  height: 1.35em;
  padding:  {
    right: 3px;
    left: 3px;
  }
  border: 1px solid;
}

.ios,
.android {
  .keypad-container {
    // Total height of div.display (1.36em height  + 2px border)
    // Height of horizontal borders in keypad (8 rows x 2 1px borders)
    // 5px more (not sure where these ae froim)
    height: calc(100% - (1.35em + 2px) - 16px - 5px;);
  }
}

.keypad-container {
  // Total height of div.display (1.36em height  + 2px border)
  // 4px more (not sure where these ae froim)
  height: calc(100% - (1.35em + 2px) - 4px);
}

.keypad {
  display: flex;
  flex-direction: row;
  flex: 8;

  height: 100%;

  border: 1px solid;
}

.keypad-column {
  display: flex;
  flex-direction: column;
  flex: 1;
}

.variable {
  font:  {
    family: serif;
    style: italic;
  }
}

.key {
  font-size: 2em;

  display: flex;
  flex: 1;
  align-items: center;
  justify-content: center;

  width: 100%;
  height: 100%;

  border: 1px solid;
}

//Steal a little from the list block to use for the label.
#history .list-block {
  margin-top: 25px;

  .list-block-label {
    margin-top: 0;
    margin-bottom: 10px;
  }
}

.key-roll {
  flex: 2;

  padding-top: 2px;
}

.confirm { background-color: $background-color-key-confirm; }

.error { background-color: $background-color-key-error; }

// TODO: Decide whether to use these colors
// sass-lint:disable no-css-comments
/*
.key { color: black; border-color: blue;}
.key-d { background-color: rgba(cornflowerblue, 0.7);}
.key-roll { background-color: rgba(lightgreen, 0.7); }
.key-favorite { background-color: rgba(yellow, 0.7); }
.key-clear, .key-delete { background-color: rgba(gray, 0.7); }
.key-operator { background-color: rgba(indigo, 0.7); }
.key-keep { background-color: rgba(orange, 0.7); }
*/
// sass-lint:enable no-css-comments
//  text-shadow: 1px 0 0 orange, 0 -1px 0 orange, 0 1px 0 orange,
//               -1px 0 0 orange;
